

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Phase Modelisation &mdash; OpenstackLCM Operator 0.1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="LifeCycle Modelisation" href="oslc_crd.html" />
    <link rel="prev" title="Nova Deployment" href="nova.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> OpenstackLCM Operator
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="kubernetes.html">Kubernetes Extensions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="lifecycle.html">Openstack Service Lifecycle</a></li>
<li class="toctree-l1"><a class="reference internal" href="lifecycle.html#sw-data-handling">SW &amp; Data Handling</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="flowcharts.html">Greenfield Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="flowcharts.html#brownfield-change">Brownfield Change</a></li>
<li class="toctree-l1"><a class="reference internal" href="keystone.html">Keystone Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="keystone.html#keystone-change">Keystone Change</a></li>
<li class="toctree-l1"><a class="reference internal" href="nova.html">Nova Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="nova.html#nova-change">Nova Change</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Phase Modelisation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#design">Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="#phase-crd">Phase CRD</a></li>
<li class="toctree-l2"><a class="reference internal" href="#phase-controller">Phase Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="#subresources">SubResources</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="oslc_crd.html">LifeCycle Modelisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">CLI Usage</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="todo.html">Help Needed</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OpenstackLCM Operator</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Phase Modelisation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/phase_crd.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="phase-modelisation">
<h1>Phase Modelisation<a class="headerlink" href="#phase-modelisation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="design">
<h2>Design<a class="headerlink" href="#design" title="Permalink to this headline">¶</a></h2>
<img alt="_images/openstackservice_lifecycle_phase_crd.png" src="_images/openstackservice_lifecycle_phase_crd.png" />
</div>
<div class="section" id="phase-crd">
<h2>Phase CRD<a class="headerlink" href="#phase-crd" title="Permalink to this headline">¶</a></h2>
<p>The CRD Phase definition is available here:</p>
<ol class="arabic simple">
<li>Its Spec which is update through kubectl: <a class="reference external" href="https://github.com/kubekit99/operator-ohm/blob/master/openstacklcm-operator/pkg/apis/openstacklcm/v1alpha1/osphases_types.go#L27">Spec</a></li>
<li>Its Status which is updated by the operator and accessible through kubectl describe: <a class="reference external" href="https://github.com/kubekit99/operator-ohm/blob/master/openstacklcm-operator/pkg/apis/openstacklcm/v1alpha1/common_types.go#L161">Status</a></li>
<li>Its definition made out of the two above components: <a class="reference external" href="https://github.com/kubekit99/operator-ohm/blob/master/openstacklcm-operator/pkg/apis/openstacklcm/v1alpha1/osphases_types.go#L109">Definition</a></li>
<li>The yaml version of the CRD: <a class="reference external" href="https://github.com/kubekit99/operator-ohm/blob/master/openstacklcm-operator/chart/templates/openstacklcm_v1alpha1_osphases.yaml">Yaml</a></li>
</ol>
</div>
<div class="section" id="phase-controller">
<h2>Phase Controller<a class="headerlink" href="#phase-controller" title="Permalink to this headline">¶</a></h2>
<p>The current POC created one CRD per phase. Most of the attributes of those CRDs are common. At one point we will have
to weight the pros and cons of having only one PhaseCRD or one TestPhaseCRD, TrafficRolloutCRD.</p>
</div>
<div class="section" id="subresources">
<h2>SubResources<a class="headerlink" href="#subresources" title="Permalink to this headline">¶</a></h2>
<p>The PhaseCRD is built using the following principles:</p>
<p>1. The current PhaseCRD are currently standalone CRDs. This provides control to the phase-controller on those objects.
At one point we will have to weight if we need to keep those CRDs or simply consider the Phase as nodes of an Argo Workflow.</p>
<p>2. The PhaseCRD is currently loading a yaml file. This could be a helm chart. The PhaseCRD is then owner of the subresources described
in the yaml file.</p>
<blockquote>
<div><ol class="loweralpha simple">
<li>an argo Workflow</li>
<li>another CRD such as an Helm3Release or an EtcdBackup</li>
<li>a simple kubernetes job, pod (utility container, script…)</li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>The key aspect here is to be able to monitor the end of those tasks as well as the success/failure.</li>
</ol>
<div class="toctree-wrapper compound">
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="oslc_crd.html" class="btn btn-neutral float-right" title="LifeCycle Modelisation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="nova.html" class="btn btn-neutral float-left" title="Nova Deployment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019 AT&amp;T Intellectual Property.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>